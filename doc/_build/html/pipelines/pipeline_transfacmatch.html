
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Transfac match pipeline &mdash; CGAT  documentation</title>
    
    <link rel="stylesheet" href="../_static/cgat.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/sorttable.js"></script>
    <script type="text/javascript" src="../_static/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.dataTables.min.js"></script>
    <link rel="top" title="CGAT  documentation" href="../index.html" />
    <link rel="up" title="NGS Pipelines" href="../CGATPipelines.html" />
    <link rel="next" title="ReadQc pipeline" href="pipeline_readqc.html" />
    <link rel="prev" title="pipeline_promotors.py - Defining promotor characteristics" href="pipeline_promotors.html" />
   <script type="text/javascript" charset="utf-8">
        $(document).ready(function() {
        $('.scrollable').dataTable({
              "sScrollY":"200px",
               "sScrollX":"100%",
               "bAutoWidth":false,
               "bPaginate":false });
     });
    </script>
     

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pipeline_readqc.html" title="ReadQc pipeline"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pipeline_promotors.html" title="pipeline_promotors.py - Defining promotor characteristics"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">CGAT  documentation</a> &raquo;</li>
          <li><a href="../Pipelines.html" >CGAT Pipelines</a> &raquo;</li>
          <li><a href="../CGATPipelines.html" accesskey="U">NGS Pipelines</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <span class="target" id="module-pipeline_transfacmatch"></span><div class="section" id="transfac-match-pipeline">
<h1>Transfac match pipeline<a class="headerlink" href="#transfac-match-pipeline" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Nick Ilott</td>
</tr>
<tr class="field-even field"><th class="field-name">Release:</th><td class="field-body">$Id: pipeline_transfacmatch</td>
</tr>
<tr class="field-odd field"><th class="field-name">Date:</th><td class="field-body">April 02, 2014</td>
</tr>
<tr class="field-even field"><th class="field-name">Tags:</th><td class="field-body">Python</td>
</tr>
</tbody>
</table>
<p>The transfac match pipeline takes a several set of <a class="reference internal" href="../glossary.html#term-bed"><em class="xref std std-term">bed</em></a> or <a class="reference internal" href="../glossary.html#term-gtf"><em class="xref std std-term">gtf</em></a> formatted files 
and scans intervals for transcription factor binding motifs.</p>
<dl class="docutils">
<dt>It performs the following analyses:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>transfac match motif analysis</dt>
<dd><ul class="first last simple">
<li>If bed files are submitted then intervals must be specified with a unique name id</li>
<li>If gtf files are submitted then specification of interval locations should be provided</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>enrichment of motifs in a foreground set of ids vs. background set of ids</dt>
<dd><ul class="first last simple">
<li>foreground and background sets must be specified</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="../UsingPipelines.html#pipelinesettingup"><em>Setting up a pipeline</em></a> and <a class="reference internal" href="../UsingPipelines.html#pipelinerunning"><em>Running a pipeline</em></a> on general information how to use CGAT pipelines.</p>
<div class="section" id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<p>The pipeline requires a configured <tt class="file docutils literal"><span class="pre">pipeline.ini</span></tt> file. The pipeline looks for a configuration file in several places:</p>
<blockquote>
<div><ol class="arabic simple">
<li>The default configuration in the <a class="reference internal" href="../glossary.html#term-code-directory"><em class="xref std std-term">code directory</em></a>.</li>
<li>A shared configuration file <tt class="file docutils literal"><span class="pre">../pipeline.ini</span></tt>.</li>
<li>A local configuration <tt class="file docutils literal"><span class="pre">pipeline.ini</span></tt>.</li>
</ol>
</div></blockquote>
<p>The order is as above. Thus, a local configuration setting will
override a shared configuration setting and a default configuration
setting.</p>
<p>Configuration files follow the ini format (see the python
<cite>ConfigParser &lt;http://docs.python.org/library/configparser.html&gt;</cite> documentation).
The configuration file is organized by section and the variables are documented within 
the file. In order to get a local configuration file in the current directory, type:</p>
<div class="highlight-python"><div class="highlight"><pre>python &lt;codedir&gt;/pipeline_transfacmatch.py config
</pre></div>
</div>
<p>The sphinxreport report requires a <tt class="file docutils literal"><span class="pre">conf.py</span></tt> and <tt class="file docutils literal"><span class="pre">sphinxreport.ini</span></tt> file 
(see <a class="reference internal" href="../UsingPipelines.html#pipelinereporting"><em>Building pipeline reports</em></a>). To start with, use the files supplied with the
<a class="reference internal" href="#example">Example</a> data.</p>
</div>
<div class="section" id="input">
<h3>Input<a class="headerlink" href="#input" title="Permalink to this headline">¶</a></h3>
<div class="section" id="intervals-gtf-entries">
<h4>Intervals / GTF entries<a class="headerlink" href="#intervals-gtf-entries" title="Permalink to this headline">¶</a></h4>
<p>Input are <a class="reference internal" href="../glossary.html#term-bed"><em class="xref std std-term">bed</em></a>-formatted files of intervals or <a class="reference internal" href="../glossary.html#term-gtf"><em class="xref std std-term">gtf</em></a> formatted files. If intervals are 
submiited then they should be at least bed4 formatted, i.e., each interval should be labelled (uniquely).</p>
</div>
<div class="section" id="background-and-foreground-sets">
<h4>Background and foreground sets<a class="headerlink" href="#background-and-foreground-sets" title="Permalink to this headline">¶</a></h4>
<p>Background and foreground sets are required to test for enrichments of TF motifs. These
are therefore subsets of the bed or gtf file. It consists of a <a class="reference internal" href="../glossary.html#term-tsv"><em class="xref std std-term">tsv</em></a> file:</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>id</td>
</tr>
<tr class="row-even"><td>id1
id2</td>
</tr>
</tbody>
</table>
<p>Background and foreground files must take the form &lt;name&gt;.background.tsv &lt;name&gt;.foreground.tsv, repectively.</p>
</div>
<div class="section" id="motif-library">
<h4>Motif library<a class="headerlink" href="#motif-library" title="Permalink to this headline">¶</a></h4>
<p>The pipeline requires that a transfac matrix library be present. Its location is specified in the
pipeline.ini.</p>
</div>
<div class="section" id="motif-profiles">
<h4>Motif profiles<a class="headerlink" href="#motif-profiles" title="Permalink to this headline">¶</a></h4>
<p>The pipeline requires a file that contains a selection of matrices to search with defined cutoffs. 
Transfac match will search only matrices that are specified in profile. 
It is advised that all matrices in the transfac profile are used.</p>
<p>It will return only hits with scores that are
equal or higher than specified in profiles.</p>
</div>
</div>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="22%" />
<col width="55%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><em>Program</em></td>
<td><em>Version</em></td>
<td><em>Purpose</em></td>
</tr>
<tr class="row-even"><td>(transfac) match</td>
<td>&nbsp;</td>
<td>sequence scanning for TF motifs</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="pipline-output">
<h2>Pipline Output<a class="headerlink" href="#pipline-output" title="Permalink to this headline">¶</a></h2>
<p>The results of the computation are all stored in an sqlite relational
database <tt class="file docutils literal"><span class="pre">csvdb</span></tt>.</p>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>Example data is available at ...
To run the example, simply unpack and untar:</p>
<div class="highlight-python"><div class="highlight"><pre>wget http://www.cgat.org/~andreas/sample_data/pipeline_transfacmatch.tgz
tar -xvzf pipeline_transfacmatch.tgz
cd pipeline_transfacmatch.dir
python &lt;srcdir&gt;/pipeline_transfacmatch.py make full
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For the pipeline to run, install the <a class="reference internal" href="pipeline_annotations.html"><em>Annotation pipeline</em></a> as well.</p>
</div>
<dl class="function">
<dt id="pipeline_transfacmatch.connect">
<tt class="descclassname">pipeline_transfacmatch.</tt><tt class="descname">connect</tt><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pipeline_transfacmatch.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>connect to database.</p>
<p>This method also attaches to helper databases.</p>
</dd></dl>

<dl class="function">
<dt id="pipeline_transfacmatch.filenameToTablename">
<tt class="descclassname">pipeline_transfacmatch.</tt><tt class="descname">filenameToTablename</tt><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline_transfacmatch.filenameToTablename" title="Permalink to this definition">¶</a></dt>
<dd><p>converts filename containing &#8221;.&#8221; to tablename where &#8221;.&#8221; converted to &#8220;_&#8221;</p>
</dd></dl>

<dl class="function">
<dt id="pipeline_transfacmatch.sentinelFile">
<tt class="descclassname">pipeline_transfacmatch.</tt><tt class="descname">sentinelFile</tt><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline_transfacmatch.sentinelFile" title="Permalink to this definition">¶</a></dt>
<dd><p>create empty file for updating purposes</p>
</dd></dl>

<dl class="function">
<dt id="pipeline_transfacmatch.buildIntervalsFasta">
<tt class="descclassname">pipeline_transfacmatch.</tt><tt class="descname">buildIntervalsFasta</tt><span class="sig-paren">(</span><em>infile</em>, <em>outfile</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline_transfacmatch.buildIntervalsFasta" title="Permalink to this definition">¶</a></dt>
<dd><p>build fasta file from intervals. Alternatively
if a gtf file is specified this function will
use parameters specified in the .ini file to 
use intervals upstream / downstream of tss</p>
</dd></dl>

<dl class="function">
<dt id="pipeline_transfacmatch.calculateGCContent">
<tt class="descclassname">pipeline_transfacmatch.</tt><tt class="descname">calculateGCContent</tt><span class="sig-paren">(</span><em>infiles</em>, <em>outfile</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline_transfacmatch.calculateGCContent" title="Permalink to this definition">¶</a></dt>
<dd><p>calculate the GC content across foreground and 
background sets</p>
</dd></dl>

<dl class="function">
<dt id="pipeline_transfacmatch.loadGCContent">
<tt class="descclassname">pipeline_transfacmatch.</tt><tt class="descname">loadGCContent</tt><span class="sig-paren">(</span><em>infile</em>, <em>outfile</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline_transfacmatch.loadGCContent" title="Permalink to this definition">¶</a></dt>
<dd><p>load the results the GC content for each background
and foreground</p>
</dd></dl>

<dl class="function">
<dt id="pipeline_transfacmatch.matchBackgroundForCpGComposition">
<tt class="descclassname">pipeline_transfacmatch.</tt><tt class="descname">matchBackgroundForCpGComposition</tt><span class="sig-paren">(</span><em>infiles</em>, <em>outfile</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline_transfacmatch.matchBackgroundForCpGComposition" title="Permalink to this definition">¶</a></dt>
<dd><p>take the background set and subset it for intervals with
a CpG distribution that is the same as the foreground set
- this requires that the background set is sufficiently
large</p>
</dd></dl>

<dl class="function">
<dt id="pipeline_transfacmatch.calculateCpGcomposition">
<tt class="descclassname">pipeline_transfacmatch.</tt><tt class="descname">calculateCpGcomposition</tt><span class="sig-paren">(</span><em>infiles</em>, <em>outfile</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline_transfacmatch.calculateCpGcomposition" title="Permalink to this definition">¶</a></dt>
<dd><p>calculate the GC content for the CpG matched data
Should be the same as the CpG content of the foreground
set</p>
</dd></dl>

<dl class="function">
<dt id="pipeline_transfacmatch.loadMatchedCpGComposition">
<tt class="descclassname">pipeline_transfacmatch.</tt><tt class="descname">loadMatchedCpGComposition</tt><span class="sig-paren">(</span><em>infile</em>, <em>outfile</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline_transfacmatch.loadMatchedCpGComposition" title="Permalink to this definition">¶</a></dt>
<dd><p>load the CpG compostion of matched background set</p>
</dd></dl>

<dl class="function">
<dt id="pipeline_transfacmatch.runMatch">
<tt class="descclassname">pipeline_transfacmatch.</tt><tt class="descname">runMatch</tt><span class="sig-paren">(</span><em>infiles</em>, <em>outfile</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline_transfacmatch.runMatch" title="Permalink to this definition">¶</a></dt>
<dd><p>run transfac(R) match</p>
</dd></dl>

<dl class="function">
<dt id="pipeline_transfacmatch.loadMatchResults">
<tt class="descclassname">pipeline_transfacmatch.</tt><tt class="descname">loadMatchResults</tt><span class="sig-paren">(</span><em>infile</em>, <em>outfile</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline_transfacmatch.loadMatchResults" title="Permalink to this definition">¶</a></dt>
<dd><p>load the results of the match analysis into 
sqlite database</p>
</dd></dl>

<dl class="function">
<dt id="pipeline_transfacmatch.buildMatchMetrics">
<tt class="descclassname">pipeline_transfacmatch.</tt><tt class="descname">buildMatchMetrics</tt><span class="sig-paren">(</span><em>infile</em>, <em>outfile</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline_transfacmatch.buildMatchMetrics" title="Permalink to this definition">¶</a></dt>
<dd><p>match outputs transcription factors that are found in the supplied
sequences. We are interested in the following metrics:</p>
<blockquote>
<div><ul class="simple">
<li>No. unique transcription factors found per sequence</li>
<li>Maximal number of TF motifs found per sequence</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="pipeline_transfacmatch.loadMatchMetrics">
<tt class="descclassname">pipeline_transfacmatch.</tt><tt class="descname">loadMatchMetrics</tt><span class="sig-paren">(</span><em>infile</em>, <em>outfile</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline_transfacmatch.loadMatchMetrics" title="Permalink to this definition">¶</a></dt>
<dd><p>load match metrics</p>
</dd></dl>

<dl class="function">
<dt id="pipeline_transfacmatch.estimateEnrichmentOfTFBS">
<tt class="descclassname">pipeline_transfacmatch.</tt><tt class="descname">estimateEnrichmentOfTFBS</tt><span class="sig-paren">(</span><em>infiles</em>, <em>outfile</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline_transfacmatch.estimateEnrichmentOfTFBS" title="Permalink to this definition">¶</a></dt>
<dd><p>estimate the significance of trnascription factors that are associated with
a foreground set of intervals vs a background set matched for CpG content</p>
</dd></dl>

<dl class="function">
<dt id="pipeline_transfacmatch.loadEnrichmentOfTFBS">
<tt class="descclassname">pipeline_transfacmatch.</tt><tt class="descname">loadEnrichmentOfTFBS</tt><span class="sig-paren">(</span><em>infile</em>, <em>outfile</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline_transfacmatch.loadEnrichmentOfTFBS" title="Permalink to this definition">¶</a></dt>
<dd><p>load the results of the enrichment</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/cgat_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Transfac match pipeline</a><ul>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#input">Input</a><ul>
<li><a class="reference internal" href="#intervals-gtf-entries">Intervals / GTF entries</a></li>
<li><a class="reference internal" href="#background-and-foreground-sets">Background and foreground sets</a></li>
<li><a class="reference internal" href="#motif-library">Motif library</a></li>
<li><a class="reference internal" href="#motif-profiles">Motif profiles</a></li>
</ul>
</li>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pipline-output">Pipline Output</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="pipeline_promotors.html"
                        title="previous chapter">pipeline_promotors.py - Defining promotor characteristics</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="pipeline_readqc.html"
                        title="next chapter">ReadQc pipeline</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/pipelines/pipeline_transfacmatch.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pipeline_readqc.html" title="ReadQc pipeline"
             >next</a> |</li>
        <li class="right" >
          <a href="pipeline_promotors.html" title="pipeline_promotors.py - Defining promotor characteristics"
             >previous</a> |</li>
        <li><a href="../index.html">CGAT  documentation</a> &raquo;</li>
          <li><a href="../Pipelines.html" >CGAT Pipelines</a> &raquo;</li>
          <li><a href="../CGATPipelines.html" >NGS Pipelines</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2011, Andreas Heger.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3a0.
    </div>
  </body>
</html>