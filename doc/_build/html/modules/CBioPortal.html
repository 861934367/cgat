
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>CBioPortal.py - Interface with the Sloan-Kettering cBioPortal webservice &mdash; CGAT  documentation</title>
    
    <link rel="stylesheet" href="../_static/cgat.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/sorttable.js"></script>
    <script type="text/javascript" src="../_static/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.dataTables.min.js"></script>
    <link rel="top" title="CGAT  documentation" href="../index.html" />
    <link rel="up" title="Modules" href="../modules.html" />
    <link rel="next" title="CGAT.py - CGAT project specific functions" href="Local.html" />
    <link rel="prev" title="BlatTest.py -" href="BlatTest.html" />
   <script type="text/javascript" charset="utf-8">
        $(document).ready(function() {
        $('.scrollable').dataTable({
              "sScrollY":"200px",
               "sScrollX":"100%",
               "bAutoWidth":false,
               "bPaginate":false });
     });
    </script>
     

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Local.html" title="CGAT.py - CGAT project specific functions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="BlatTest.html" title="BlatTest.py -"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">CGAT  documentation</a> &raquo;</li>
          <li><a href="../modules.html" accesskey="U">Modules</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <span class="target" id="module-CBioPortal"></span><div class="section" id="cbioportal-py-interface-with-the-sloan-kettering-cbioportal-webservice">
<h1>CBioPortal.py - Interface with the Sloan-Kettering cBioPortal webservice<a class="headerlink" href="#cbioportal-py-interface-with-the-sloan-kettering-cbioportal-webservice" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Ian Sudbery</td>
</tr>
<tr class="field-even field"><th class="field-name">Release:</th><td class="field-body">$Id$</td>
</tr>
<tr class="field-odd field"><th class="field-name">Date:</th><td class="field-body">April 02, 2014</td>
</tr>
<tr class="field-even field"><th class="field-name">Tags:</th><td class="field-body">Python</td>
</tr>
</tbody>
</table>
<p>The Sloan Kettering cBioPortal webservice provides access to a database of
results of genomics experiments on various cancers. The database is organised
into studies, each study contains a number of case lists, where each list contains
the ids of a set of patients, and genetic profiles, each of which represents an assay
conducted on the patients in the case list as part of the study.</p>
<p>The main class here is the CBioPortal class representing a connection to the cBioPortal
Database. Query&#8217;s are represented as methods of the class. Study ids or names or case lists
can be provided to the constructor to the object, via the setDefaultStudy and 
setDefaultCaseList methods or to the indevidual query methods. Where ever possible
the validity of parameters is checked <em>before</em> the query is executed.</p>
<p>Whenever a query requires a genetic  profile id or a list of such ids, but none are
given, the list of all profiles for which the show_in_analysis flag is set will be
used.</p>
<p>All of the commands provided in the webservice are implemented here and as far as 
possible the name, syntax and paramter names of the query are identical to the
raw commands to the webservice. These queries are:</p>
<ul class="simple">
<li>getCancerStudies,</li>
<li>getCaseLists,</li>
<li>getProfileData,</li>
<li>getMutationData,</li>
<li>getClinicalData,</li>
<li>getProteinArrayInfo,</li>
<li>getProteinArrayData,</li>
<li>getLink,</li>
<li>getOncoprintHTML.</li>
</ul>
<p>In addition two new queries are implememented that are not part of the webservice:</p>
<ul class="simple">
<li>getPercentAltered and</li>
<li>getTotalAltered</li>
</ul>
<p>These emulate the function of the website where the percent of cases that show any
alteration for the gene and profiles given are returned (getPercentAltered, or the
percent of cases that show an alteration in any of the genes (getTotalAltered) is
returned.</p>
<p>examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">gene_list</span> <span class="o">=</span> <span class="p">[</span> <span class="s">&quot;TP53&quot;</span><span class="p">,</span>
<span class="s">&quot;BCL2&quot;</span><span class="p">,</span>
<span class="s">&quot;MYC&quot;</span>  <span class="p">]</span>
<span class="n">portal</span> <span class="o">=</span> <span class="n">CBioPortal</span><span class="p">()</span>
<span class="n">portal</span><span class="o">.</span><span class="n">setDefaultStudy</span><span class="p">(</span><span class="n">study</span> <span class="o">=</span> <span class="s">&quot;prad_mskcc&quot;</span><span class="p">)</span>
<span class="n">portal</span><span class="o">.</span><span class="n">setDefaultCaseList</span><span class="p">(</span><span class="n">case_set_id</span> <span class="o">=</span> <span class="s">&quot;prad_all_complete&quot;</span><span class="p">)</span>
<span class="n">portal</span><span class="o">.</span><span class="n">getPercentAltered</span><span class="p">(</span><span class="n">gene_list</span> <span class="o">=</span> <span class="n">gene_list</span><span class="p">)</span>
</pre></div>
</div>
<p>or more tersely:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">portal</span><span class="o">.</span><span class="n">CBioProtal</span><span class="p">()</span>
<span class="n">portal</span><span class="o">.</span><span class="n">getPercentAltered</span><span class="p">(</span><span class="n">study</span> <span class="o">=</span> <span class="s">&quot;prad_mskcc&quot;</span><span class="p">,</span> <span class="n">case_set_id</span> <span class="o">=</span> <span class="s">&quot;prad_all_complete&quot;</span><span class="p">,</span> 
                         <span class="n">gene_list</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;TP53&quot;</span><span class="p">,</span><span class="s">&quot;BCL2&quot;</span><span class="p">,</span><span class="s">&quot;MYC&quot;</span><span class="p">],</span> 
                         <span class="n">genetic_profile_id</span> <span class="o">=</span><span class="p">[</span><span class="s">&quot;prad_mskcc_mrna&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>Any warnings returned by the query are stored in CBioPortal.last_warnings.</p>
<p>Query&#8217;s that would give too long an URL are split into smaller querys and the results
combined transparently.</p>
<p>A commandline interface is provided for convenience, syntax:</p>
<div class="highlight-python"><div class="highlight"><pre>python CBioPortal.py [options] command(s)
</pre></div>
</div>
<dl class="exception">
<dt id="CBioPortal.CDGSError">
<em class="property">exception </em><tt class="descclassname">CBioPortal.</tt><tt class="descname">CDGSError</tt><span class="sig-paren">(</span><em>error</em>, <em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#CBioPortal.CDGSError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/2.7/library/exceptions.html#exceptions.Exception" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></tt></a></p>
<p>exception that handles errors returned by querys in the database</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/cgat_logo.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="BlatTest.html"
                        title="previous chapter">BlatTest.py -</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Local.html"
                        title="next chapter">CGAT.py - CGAT project specific functions</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/modules/CBioPortal.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Local.html" title="CGAT.py - CGAT project specific functions"
             >next</a> |</li>
        <li class="right" >
          <a href="BlatTest.html" title="BlatTest.py -"
             >previous</a> |</li>
        <li><a href="../index.html">CGAT  documentation</a> &raquo;</li>
          <li><a href="../modules.html" >Modules</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2011, Andreas Heger.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3a0.
    </div>
  </body>
</html>