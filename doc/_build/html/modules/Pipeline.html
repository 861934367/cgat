
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Pipeline.py - Tools for ruffus pipelines &mdash; CGAT  documentation</title>
    
    <link rel="stylesheet" href="../_static/cgat.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/sorttable.js"></script>
    <script type="text/javascript" src="../_static/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.dataTables.min.js"></script>
    <link rel="top" title="CGAT  documentation" href="../index.html" />
    <link rel="up" title="Modules" href="../modules.html" />
    <link rel="next" title="PipelineTracks.py - Definition of tracks in pipelines" href="../pipelinemodules/PipelineTracks.html" />
    <link rel="prev" title="ProgressBar.py -" href="ProgressBar.html" />
   <script type="text/javascript" charset="utf-8">
        $(document).ready(function() {
        $('.scrollable').dataTable({
              "sScrollY":"200px",
               "sScrollX":"100%",
               "bAutoWidth":false,
               "bPaginate":false });
     });
    </script>
     

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../pipelinemodules/PipelineTracks.html" title="PipelineTracks.py - Definition of tracks in pipelines"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ProgressBar.html" title="ProgressBar.py -"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">CGAT  documentation</a> &raquo;</li>
          <li><a href="../modules.html" accesskey="U">Modules</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <span class="target" id="module-Pipeline"></span><div class="section" id="pipeline-py-tools-for-ruffus-pipelines">
<h1>Pipeline.py - Tools for ruffus pipelines<a class="headerlink" href="#pipeline-py-tools-for-ruffus-pipelines" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Andreas Heger</td>
</tr>
<tr class="field-even field"><th class="field-name">Release:</th><td class="field-body">$Id$</td>
</tr>
<tr class="field-odd field"><th class="field-name">Date:</th><td class="field-body">April 02, 2014</td>
</tr>
<tr class="field-even field"><th class="field-name">Tags:</th><td class="field-body">Python</td>
</tr>
</tbody>
</table>
<p>The <a class="reference internal" href="#module-Pipeline" title="Pipeline"><tt class="xref py py-mod docutils literal"><span class="pre">Pipeline</span></tt></a> module contains various utility functions for
interfacing CGAT ruffus pipelines with databases and the cluster.</p>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="Pipeline.getParameters">
<tt class="descclassname">Pipeline.</tt><tt class="descname">getParameters</tt><span class="sig-paren">(</span><em>filenames=['pipeline.ini'], defaults=None, default_ini=True</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.getParameters" title="Permalink to this definition">¶</a></dt>
<dd><p>read a config file and return as a dictionary.</p>
<p>Sections and keys are combined with an underscore. If a key
without section does not exist, it will be added plain.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">general</span><span class="p">]</span>
<span class="nb">input</span><span class="o">=</span><span class="n">input1</span><span class="o">.</span><span class="n">file</span>

<span class="p">[</span><span class="n">special</span><span class="p">]</span>
<span class="nb">input</span><span class="o">=</span><span class="n">input2</span><span class="o">.</span><span class="n">file</span>
</pre></div>
</div>
<p>will be entered as { &#8216;general_input&#8217; : &#8220;input1.file&#8221;,
&#8216;input: &#8220;input1.file&#8221;, &#8216;special_input&#8217; : &#8220;input2.file&#8221; }</p>
<p>This function also updates the module-wide parameter map.</p>
<p>The section [DEFAULT] is equivalent to [general].</p>
<p>If default_ini is set, the default initialization file
will be read from &#8216;CGATPipelines/configuration/pipeline.ini&#8217;</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.loadParameters">
<tt class="descclassname">Pipeline.</tt><tt class="descname">loadParameters</tt><span class="sig-paren">(</span><em>filenames</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.loadParameters" title="Permalink to this definition">¶</a></dt>
<dd><p>load parameters from a tuple of filenames.</p>
<p>Parameters are processed in the same way as
getParameters, but the global parameter dictionary
is not updated.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.substituteParameters">
<tt class="descclassname">Pipeline.</tt><tt class="descname">substituteParameters</tt><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.substituteParameters" title="Permalink to this definition">¶</a></dt>
<dd><p>return a local PARAMS dictionary.</p>
<p>Options in <tt class="docutils literal"><span class="pre">**kwargs</span></tt> substitute default
values in PARAMS.</p>
<p>Finally, task specific configuration values are inserted.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.asList">
<tt class="descclassname">Pipeline.</tt><tt class="descname">asList</tt><span class="sig-paren">(</span><em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.asList" title="Permalink to this definition">¶</a></dt>
<dd><p>return a param as a list</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.asTuple">
<tt class="descclassname">Pipeline.</tt><tt class="descname">asTuple</tt><span class="sig-paren">(</span><em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.asTuple" title="Permalink to this definition">¶</a></dt>
<dd><p>return a param as a list</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.flatten">
<tt class="descclassname">Pipeline.</tt><tt class="descname">flatten</tt><span class="sig-paren">(</span><em>l</em>, <em>ltypes=(&lt;type 'list'&gt;</em>, <em>&lt;type 'tuple'&gt;)</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.flatten" title="Permalink to this definition">¶</a></dt>
<dd><p>flatten a nested list/tuple.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.asDict">
<tt class="descclassname">Pipeline.</tt><tt class="descname">asDict</tt><span class="sig-paren">(</span><em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.asDict" title="Permalink to this definition">¶</a></dt>
<dd><p>return a section of configuration file as a dictionary.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.isTrue">
<tt class="descclassname">Pipeline.</tt><tt class="descname">isTrue</tt><span class="sig-paren">(</span><em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.isTrue" title="Permalink to this definition">¶</a></dt>
<dd><p>return True if param has a True value.</p>
<p>A parameter is false if it is:</p>
<ul class="simple">
<li>not set</li>
<li>0</li>
<li>the empty string</li>
<li>false or False</li>
</ul>
<p>Otherwise the value is true.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.checkFiles">
<tt class="descclassname">Pipeline.</tt><tt class="descname">checkFiles</tt><span class="sig-paren">(</span><em>filenames</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.checkFiles" title="Permalink to this definition">¶</a></dt>
<dd><p>check for the presence/absence of files</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.clone">
<tt class="descclassname">Pipeline.</tt><tt class="descname">clone</tt><span class="sig-paren">(</span><em>infile</em>, <em>outfile</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.clone" title="Permalink to this definition">¶</a></dt>
<dd><p>create a clone of <tt class="docutils literal"><span class="pre">infile</span></tt> named <tt class="docutils literal"><span class="pre">outfile</span></tt>
by creating a soft-link.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.touch">
<tt class="descclassname">Pipeline.</tt><tt class="descname">touch</tt><span class="sig-paren">(</span><em>filename</em>, <em>times=None</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.touch" title="Permalink to this definition">¶</a></dt>
<dd><p>update/create a sentinel file.</p>
<p>Compressed files (ending in .gz) are created
as empty &#8216;gzip&#8217; files, i.e., with a header.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.getTempFilename">
<tt class="descclassname">Pipeline.</tt><tt class="descname">getTempFilename</tt><span class="sig-paren">(</span><em>dir='/scratch'</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.getTempFilename" title="Permalink to this definition">¶</a></dt>
<dd><p>get a temporary filename.</p>
<p>The caller needs to delete it.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.getTempFile">
<tt class="descclassname">Pipeline.</tt><tt class="descname">getTempFile</tt><span class="sig-paren">(</span><em>dir='/scratch'</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.getTempFile" title="Permalink to this definition">¶</a></dt>
<dd><p>get a temporary file.</p>
<p>The caller needs to delete it.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.checkExecutables">
<tt class="descclassname">Pipeline.</tt><tt class="descname">checkExecutables</tt><span class="sig-paren">(</span><em>filenames</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.checkExecutables" title="Permalink to this definition">¶</a></dt>
<dd><p>check for the presence/absence of executables in the path</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.checkScripts">
<tt class="descclassname">Pipeline.</tt><tt class="descname">checkScripts</tt><span class="sig-paren">(</span><em>filenames</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.checkScripts" title="Permalink to this definition">¶</a></dt>
<dd><p>check for the presence/absence of scripts</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.log">
<tt class="descclassname">Pipeline.</tt><tt class="descname">log</tt><span class="sig-paren">(</span><em>loglevel</em>, <em>message</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.log" title="Permalink to this definition">¶</a></dt>
<dd><p>log message at loglevel.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.isEmpty">
<tt class="descclassname">Pipeline.</tt><tt class="descname">isEmpty</tt><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.isEmpty" title="Permalink to this definition">¶</a></dt>
<dd><p>return true if file <em>filename</em> is empty.</p>
<p>If filename ends in .gz, it checks if the contents are empty
by opening it.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.quote">
<tt class="descclassname">Pipeline.</tt><tt class="descname">quote</tt><span class="sig-paren">(</span><em>track</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.quote" title="Permalink to this definition">¶</a></dt>
<dd><p>quote track such that is applicable for a table name.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.shellquote">
<tt class="descclassname">Pipeline.</tt><tt class="descname">shellquote</tt><span class="sig-paren">(</span><em>statement</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.shellquote" title="Permalink to this definition">¶</a></dt>
<dd><p>shell quote a string to be used as a function argument.</p>
<p>from <a class="reference external" href="http://stackoverflow.com/questions/967443/python-module-to-shellquote-unshellquote">http://stackoverflow.com/questions/967443/python-module-to-shellquote-unshellquote</a></p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.toTable">
<tt class="descclassname">Pipeline.</tt><tt class="descname">toTable</tt><span class="sig-paren">(</span><em>outfile</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.toTable" title="Permalink to this definition">¶</a></dt>
<dd><p>convert an outfile (filename) into
a table name.</p>
<p>The table name is quoted.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.load">
<tt class="descclassname">Pipeline.</tt><tt class="descname">load</tt><span class="sig-paren">(</span><em>infile</em>, <em>outfile=None</em>, <em>options=''</em>, <em>collapse=False</em>, <em>transpose=False</em>, <em>tablename=None</em>, <em>limit=0</em>, <em>shuffle=False</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.load" title="Permalink to this definition">¶</a></dt>
<dd><p>straight import from tab separated table.</p>
<p>The table name is given by outfile without the
&#8221;.load&#8221; suffix.</p>
<p>If <em>collapse</em> is set, the table will be collapsed before loading.
The value of collapse is the value used for missing values.</p>
<p>If <em>transpose</em> is set, the table will be transposed before
loading.  The first column in the first row will be set to the
string within transpose.</p>
<p>If <em>limit</em> is set, only load the first n lines.
If <em>shuffle</em> is set, randomize lines before loading. Together
with <em>limit</em> this permits loading a sample of rows.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.concatenateAndLoad">
<tt class="descclassname">Pipeline.</tt><tt class="descname">concatenateAndLoad</tt><span class="sig-paren">(</span><em>infiles</em>, <em>outfile</em>, <em>regex_filename=None</em>, <em>header=None</em>, <em>cat=None</em>, <em>has_titles=True</em>, <em>missing_value='na'</em>, <em>options=''</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.concatenateAndLoad" title="Permalink to this definition">¶</a></dt>
<dd><p>concatenate categorical tables and load into a database.</p>
<p>If <em>has_titles</em> is False, the tables are assumed to have no titles.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.mergeAndLoad">
<tt class="descclassname">Pipeline.</tt><tt class="descname">mergeAndLoad</tt><span class="sig-paren">(</span><em>infiles</em>, <em>outfile</em>, <em>suffix=None</em>, <em>columns=(0</em>, <em>1)</em>, <em>regex=None</em>, <em>row_wise=True</em>, <em>options=''</em>, <em>prefixes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.mergeAndLoad" title="Permalink to this definition">¶</a></dt>
<dd><p>merge categorical tables and load into a database.</p>
<p>The tables are merged and entered row-wise, i.e each file is a
row. If <em>row_wise</em> is set to False, each table will be a column in
the resulting table. This is useful if histograms are being
merged.</p>
<p><em>columns</em> denotes the columns to be taken. By default, the first
two columns are taken with the first being the key. Filenames are
stored in a <tt class="docutils literal"><span class="pre">track</span></tt> column. Directory names are chopped off.</p>
<p>If <em>columns</em> is set to None, all columns will be taken. Here,
column names will receive a prefix (<em>prefixes</em>). If <em>prefixes</em> is
None, the filename will be added as a prefix.</p>
<p>If <em>prefixes</em> is a list, the respective prefix will be added to
each column. The length of <em>prefixes</em> and <em>infiles</em> need to be the
same.</p>
<p>The track names are given by the filenames without any paths. If
<em>suffix</em> is given, the suffix will be removed. If <em>regex</em> is set,
the full filename will be used to extract a track name via the
supplied regular expression.</p>
<p><em>options</em> are passed on to <tt class="docutils literal"><span class="pre">csv2db.py</span></tt>.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.createView">
<tt class="descclassname">Pipeline.</tt><tt class="descname">createView</tt><span class="sig-paren">(</span><em>dbhandle</em>, <em>tables</em>, <em>tablename</em>, <em>outfile</em>, <em>view_type='TABLE'</em>, <em>ignore_duplicates=True</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.createView" title="Permalink to this definition">¶</a></dt>
<dd><p>create a view in database for tables.</p>
<p>Tables should be a list of tuples. Each tuple
should contain the name of a table and the field
to join with the first table.</p>
<p>If ignore duplicates is set to False, duplicate column
names will be added with the tablename as prefix. The
default is to ignore.</p>
<dl class="docutils">
<dt>For example::</dt>
<dd><dl class="first last docutils">
<dt>tables = (&#8220;reads_summary&#8221;, &#8220;track&#8221;,</dt>
<dd>&#8220;bam_stats&#8221;, &#8220;track&#8221;,
&#8220;context_stats&#8221;, &#8220;track&#8221;,
&#8220;picard_stats_alignment_summary_metrics&#8221;, &#8220;track&#8221; )</dd>
</dl>
</dd>
<dt>view_type</dt>
<dd>type of view. If a view is to be created across multiple database,
use &#8220;TABLE&#8221;, otherwise, use &#8220;VIEW&#8221;</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="Pipeline.snip">
<tt class="descclassname">Pipeline.</tt><tt class="descname">snip</tt><span class="sig-paren">(</span><em>filename</em>, <em>extension=None</em>, <em>alt_extension=None</em>, <em>strip_path=False</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.snip" title="Permalink to this definition">¶</a></dt>
<dd><p>return prefix of filename.</p>
<p>If <em>extension</em> is given, make sure that filename has the extension.</p>
<p>If <em>strip_path</em> is set to true, the path is stripped from the file name.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.getCallerLocals">
<tt class="descclassname">Pipeline.</tt><tt class="descname">getCallerLocals</tt><span class="sig-paren">(</span><em>decorators=0</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.getCallerLocals" title="Permalink to this definition">¶</a></dt>
<dd><p>returns locals of caller using frame.</p>
<p>optional pass number of decorators</p>
<p>from <a class="reference external" href="http://pylab.blogspot.com/2009/02/python-accessing-caller-locals-from.html">http://pylab.blogspot.com/2009/02/python-accessing-caller-locals-from.html</a></p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.execute">
<tt class="descclassname">Pipeline.</tt><tt class="descname">execute</tt><span class="sig-paren">(</span><em>statement</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>execute a statement locally.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.buildStatement">
<tt class="descclassname">Pipeline.</tt><tt class="descname">buildStatement</tt><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.buildStatement" title="Permalink to this definition">¶</a></dt>
<dd><p>build statement from kwargs.</p>
<p>Options in PARAMS are added, but kwargs take precedence.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.expandStatement">
<tt class="descclassname">Pipeline.</tt><tt class="descname">expandStatement</tt><span class="sig-paren">(</span><em>statement</em>, <em>ignore_pipe_errors=False</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.expandStatement" title="Permalink to this definition">¶</a></dt>
<dd><p>add exec_prefix and exec_suffix to statement.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.joinStatements">
<tt class="descclassname">Pipeline.</tt><tt class="descname">joinStatements</tt><span class="sig-paren">(</span><em>statements</em>, <em>infile</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.joinStatements" title="Permalink to this definition">¶</a></dt>
<dd><p>join a chain of statements into a single statement.</p>
<p>Each statement contains an &#64;IN&#64; or a &#64;OUT&#64; or both.
These will be replaced by the names of successive temporary
files.</p>
<p>In the first statement, &#64;IN&#64; is replaced with <em>infile</em>.</p>
<p>The last statement should move &#64;IN&#64; to outfile.</p>
<p>returns a single statement.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.getStdoutStderr">
<tt class="descclassname">Pipeline.</tt><tt class="descname">getStdoutStderr</tt><span class="sig-paren">(</span><em>stdout_path</em>, <em>stderr_path</em>, <em>tries=5</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.getStdoutStderr" title="Permalink to this definition">¶</a></dt>
<dd><p>get stdout/stderr allowing for same lag.</p>
<p>Try at most <em>tries</em> times. If unsuccessfull, throw PipelineError.</p>
<p>Removes the files once they are read.</p>
<p>Returns tuple of stdout and stderr.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.run">
<tt class="descclassname">Pipeline.</tt><tt class="descname">run</tt><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.run" title="Permalink to this definition">¶</a></dt>
<dd><p>run a statement.</p>
<p>runs it on the cluster using drmaa if to_cluster is set.</p>
<dl class="docutils">
<dt>Troubleshooting:</dt>
<dd><ol class="first last arabic simple">
<li>DRMAA creates sessions and their is a limited number
of sessions available. If there are two many or sessions
become not available after failed jobs, use <tt class="docutils literal"><span class="pre">qconf</span> <span class="pre">-secl</span></tt>
to list sessions and <tt class="docutils literal"><span class="pre">qconf</span> <span class="pre">-kec</span> <span class="pre">#</span></tt> to delete sessions.</li>
<li>Memory: 1G of free memory can be requested using <tt class="docutils literal"><span class="pre">-l</span> <span class="pre">mem_free=1G</span></tt>.
If there are error messages like &#8220;no available queue&#8221;, then the
problem could be that a particular complex attribute has
not been defined (the code should be <tt class="docutils literal"><span class="pre">hc</span></tt> for <tt class="docutils literal"><span class="pre">host:complex</span></tt>
and not <tt class="docutils literal"><span class="pre">hl</span></tt> for <tt class="docutils literal"><span class="pre">host:local</span></tt>. Note that qrsh/qsub directly
still works.</li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="Pipeline.MultiLineFormatter">
<em class="property">class </em><tt class="descclassname">Pipeline.</tt><tt class="descname">MultiLineFormatter</tt><span class="sig-paren">(</span><em>fmt=None</em>, <em>datefmt=None</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.MultiLineFormatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/2.7/library/logging.html#logging.Formatter" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">logging.Formatter</span></tt></a></p>
<p>logfile formatter: add identation for multi-line entries.</p>
<p>Initialize the formatter with specified format strings.</p>
<p>Initialize the formatter either with the specified format string, or a
default as described above. Allow for specialized date formatting with
the optional datefmt argument (if omitted, you get the ISO8601 format).</p>
<dl class="method">
<dt id="Pipeline.MultiLineFormatter.converter">
<tt class="descname">converter</tt><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.MultiLineFormatter.converter" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>localtime([seconds]) -&gt; (tm_year,tm_mon,tm_mday,tm_hour,tm_min,</dt>
<dd>tm_sec,tm_wday,tm_yday,tm_isdst)</dd>
</dl>
<p>Convert seconds since the Epoch to a time tuple expressing local time.
When &#8216;seconds&#8217; is not passed in, convert the current time instead.</p>
</dd></dl>

<dl class="method">
<dt id="Pipeline.MultiLineFormatter.formatException">
<tt class="descname">formatException</tt><span class="sig-paren">(</span><em>ei</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.MultiLineFormatter.formatException" title="Permalink to this definition">¶</a></dt>
<dd><p>Format and return the specified exception information as a string.</p>
<p>This default implementation just uses
traceback.print_exception()</p>
</dd></dl>

<dl class="method">
<dt id="Pipeline.MultiLineFormatter.formatTime">
<tt class="descname">formatTime</tt><span class="sig-paren">(</span><em>record</em>, <em>datefmt=None</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.MultiLineFormatter.formatTime" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the creation time of the specified LogRecord as formatted text.</p>
<p>This method should be called from format() by a formatter which
wants to make use of a formatted time. This method can be overridden
in formatters to provide for any specific requirement, but the
basic behaviour is as follows: if datefmt (a string) is specified,
it is used with time.strftime() to format the creation time of the
record. Otherwise, the ISO8601 format is used. The resulting
string is returned. This function uses a user-configurable function
to convert the creation time to a tuple. By default, time.localtime()
is used; to change this for a particular formatter instance, set the
&#8216;converter&#8217; attribute to a function with the same signature as
time.localtime() or time.gmtime(). To change it for all formatters,
for example if you want all logging times to be shown in GMT,
set the &#8216;converter&#8217; attribute in the Formatter class.</p>
</dd></dl>

<dl class="method">
<dt id="Pipeline.MultiLineFormatter.usesTime">
<tt class="descname">usesTime</tt><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.MultiLineFormatter.usesTime" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the format uses the creation time of the record.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="Pipeline.submit">
<tt class="descclassname">Pipeline.</tt><tt class="descname">submit</tt><span class="sig-paren">(</span><em>module</em>, <em>function</em>, <em>params=None</em>, <em>infiles=None</em>, <em>outfiles=None</em>, <em>toCluster=True</em>, <em>logfile=None</em>, <em>jobOptions=''</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.submit" title="Permalink to this definition">¶</a></dt>
<dd><p>Submit a python <em>function</em> as a job to the cluster.</p>
<p>The function should reside in <em>module</em>. If <em>module</em> is
not part of the PYTHONPATH, an absolute path can be given.</p>
<p><em>infiles</em> and <em>output</em> are either a single filename or a list of
input/output filenames. Neither options supports yet nested lists.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.clonePipeline">
<tt class="descclassname">Pipeline.</tt><tt class="descname">clonePipeline</tt><span class="sig-paren">(</span><em>srcdir</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.clonePipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>clone a pipeline from srcdir into the current directory.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.clean">
<tt class="descclassname">Pipeline.</tt><tt class="descname">clean</tt><span class="sig-paren">(</span><em>patterns</em>, <em>dry_run=False</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.clean" title="Permalink to this definition">¶</a></dt>
<dd><p>clean up files given by glob <em>patterns</em>.</p>
<p>returns list of files deleted together with their statinfo.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.peekParameters">
<tt class="descclassname">Pipeline.</tt><tt class="descname">peekParameters</tt><span class="sig-paren">(</span><em>workingdir</em>, <em>pipeline</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.peekParameters" title="Permalink to this definition">¶</a></dt>
<dd><p>peak configuration parameters from an external directory.</p>
</dd></dl>

<dl class="function">
<dt id="Pipeline.run_report">
<tt class="descclassname">Pipeline.</tt><tt class="descname">run_report</tt><span class="sig-paren">(</span><em>clean=True</em><span class="sig-paren">)</span><a class="headerlink" href="#Pipeline.run_report" title="Permalink to this definition">¶</a></dt>
<dd><p>run sphinxreport.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/cgat_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Pipeline.py - Tools for ruffus pipelines</a><ul>
<li><a class="reference internal" href="#api">API</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="ProgressBar.html"
                        title="previous chapter">ProgressBar.py -</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../pipelinemodules/PipelineTracks.html"
                        title="next chapter">PipelineTracks.py - Definition of tracks in pipelines</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/modules/Pipeline.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../pipelinemodules/PipelineTracks.html" title="PipelineTracks.py - Definition of tracks in pipelines"
             >next</a> |</li>
        <li class="right" >
          <a href="ProgressBar.html" title="ProgressBar.py -"
             >previous</a> |</li>
        <li><a href="../index.html">CGAT  documentation</a> &raquo;</li>
          <li><a href="../modules.html" >Modules</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2011, Andreas Heger.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3a0.
    </div>
  </body>
</html>